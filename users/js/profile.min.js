jQuery(document).ready(function(e){d();f();e(document).on("click",".pr-info",function(h){h.preventDefault();g(e(this))});e(document).on("click",".pr-password",function(h){h.preventDefault();g(e(this))});e(document).on("click",".pr-message",function(h){h.preventDefault();g(e(this))});function g(j){var i=e(".profile-wrap"),m=e(".profile-content"),h=e(".profile-wrap > .loader"),l=ajax_var.url,k=j.data("page");a(j);h.show();e.ajax({url:l,type:"post",data:{page:k,action:"profile_info_callback"},error:function(n){console.log("error - "+n)},success:function(n){m.remove();h.hide();i.append(n);if(k===1){d()}}})}function a(h){e(".profile-menu").find(".active").removeClass("active");h.parent().addClass("active")}e(document).on("click",".login-fields",function(h){h.preventDefault();b(e(this))});e(document).on("click",".register-fields",function(h){h.preventDefault();b(e(this))});function b(j){var i=e(".account-content"),m=e(".account-fields"),h=e(".account-content > .loader"),l=ajax_var.url,k=j.data("page");h.show();c(j);e.ajax({url:l,type:"post",data:{page:k,action:"account_info_callback"},error:function(n){console.log("error - "+n)},success:function(n){m.remove();h.hide();i.append(n);f()}})}function c(h){e(".account-wrapper").find(".active").removeClass("active");h.addClass("active")}function d(){var m;e("#upload-button").on("click",function(o){o.preventDefault();if(m){m.open();return}m=wp.media.frames.file_frame=wp.media({library:{type:"image"},mimes:"jpeg",multiple:false,});m.on("select",function(){var p=m.state().get("selection").first().toJSON();e("#avatar").val(p.sizes.thumbnail.url);e("#profile-picture-preview").attr("src",p.sizes.thumbnail.url)});m.open()});e("#delete-button").on("click",function(o){o.preventDefault();e("#avatar").val("");e("#profile-picture-preview").attr("src","")});var n=garage.templateUrl+"/users/images/";var j=e("#gender-man"),l=e("#gender-woman"),k=e("#gender-company"),i=e(".profile-fio"),h=e(".profile-organization");j.click(function(){if(e(this).is(":checked")){e(".profile-picture").attr("style","background-image: url("+n+"male.svg)");h.hide();i.show()}});l.click(function(){if(e(this).is(":checked")){e(".profile-picture").attr("style","background-image: url("+n+"female.svg)");h.hide();i.show()}});k.click(function(){if(e(this).is(":checked")){e(".profile-picture").attr("style","background-image: url("+n+"company.svg)");h.show();i.hide()}});if(k.is(":checked")){h.show()}else{i.show()}}function f(){var k=false;var i=e(".userform");function h(o,n,m){if(k){n.find(".response").addClass("response-block");n.find(".response").html('<p class="error">Waite..</p>');return false}n.find('input[type="submit"]').attr("disabled","disabled");n.find(".response").html("");k=true}function l(o,p,q,n){console.log(arguments);if(o.success){var m='<p class="success">'+o.data.message+"</p>"}else{var m='<p class="error">'+o.data.message+"</p>";n.find(".response").addClass("response-block");n.find(".response").html(m)}if(o.data.redirect){window.location.href=o.data.redirect}k=false}var j={dataType:"json",beforeSubmit:h,success:l,error:function(m){console.log(arguments)},url:ajax_var.url};i.ajaxForm(j);e(".logout").click(function(m){m.preventDefault();if(k){return false}var n=e(this);e.ajax({type:"POST",url:ajax_var.url,dataType:"json",data:"action=logout_me&nonce="+e(this).data("nonce"),beforeSend:function(o){k=true},success:function(o){if(o.success){window.location.reload(true)}else{alert(o.data.message)}},error:function(q,o,p){console.log(arguments)},complete:function(o){k=false}})})}});